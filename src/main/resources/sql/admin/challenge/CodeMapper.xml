<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTO Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.earthball.admin.challenge.mapper.CodeMapper">

	<insert id="insertGrp" parameterType="com.earthball.admin.challenge.dto.GrpCodeDto">
		INSERT INTO TB_GRP_CODE (GRP_CODE
								, GRP_CODE_NAME
								, STATUS)
		VALUES (#{grpCodeDto}
			   , #{grpCodeName}
			   , 'Y')
	</insert>


	<select id="selectListCount" resultType="java.lang.Integer">
		SELECT COUNT(*) CNT
		FROM TB_GRP_CODE
		WHERE STATUS = 'Y'
	</select>


	<select id="selectList" resultType="com.earthball.admin.challenge.dto.GrpCodeDto">
		SELECT GRP_CODE
			 , GRP_CODE_NAME
		FROM TB_GRP_CODE
		WHERE STATUS = 'Y'
	</select>


	<select id="selectGrp" parameterType="String" resultType="com.earthball.admin.challenge.dto.GrpCodeDto">
		SELECT GRP_CODE
			 , GRP_CODE_NAME
		FROM TB_GRP_CODE
		WHERE STATUS = 'Y'
		  AND GRP_CODE = #{grpCodeDto}
	</select>


	<update id="updateGrp" parameterType="com.earthball.admin.challenge.dto.GrpCodeDto">
		UPDATE TB_GRP_CODE
		SET GRP_CODE = #{grpCodeDto}
		  , GRP_CODE_NAME = #{grpCodeName}
		WHERE GRP_CODE = #{grpCodeDto}
		  AND STATUS = 'Y'
	</update>


	<update id="deleteGrp" parameterType="String">
		UPDATE TB_GRP_CODE
		SET STATUS = 'N'
		WHERE GRP_CODE = #{grpCodeDto}
	</update>

	<insert id="insertCode" parameterType="com.earthball.admin.challenge.dto.CodeDto">
		INSERT INTO TB_CODE (CODE
						   , CODE_NAME
						   , SORT_NO
						   , GRP_CODE)
					 VALUES (#{codeDto}
					 	   , #{codeName}
					 	   , #{sortNo}
					 	   , #{grpCodeDto})
	</insert>


	<select id="selectCodeList" parameterType="String" resultType="com.earthball.admin.challenge.dto.CodeDto">
		SELECT CODE
			 , CODE_NAME
			 , SORT_NO
             , GRP_CODE
		  FROM TB_CODE
		 WHERE STATUS = 'Y'
		   AND GRP_CODE = #{grpCodeDto}
	</select>

	<select id="selectCode"  resultType="com.earthball.admin.challenge.dto.CodeDto">
		SELECT CODE
			 , CODE_NAME
			 , SORT_NO
			 , GRP_CODE
		FROM TB_CODE
		WHERE STATUS = 'Y'
		  AND GRP_CODE = #{grpCodeDto}
		  AND CODE = #{codeDto}
	</select>

	<update id="updateCode" parameterType="com.earthball.admin.challenge.dto.CodeDto">
		UPDATE TB_CODE
		   SET CODE_NAME = #{codeName}
		     , SORT_NO = #{sortNo}
		 WHERE CODE = #{codeDto}
		   AND GRP_CODE = #{grpCodeDto}
	</update>

	<update id="deleteCode">
		UPDATE TB_CODE
		SET  STATUS = 'N'
		WHERE CODE = #{codeDto}
		  AND GRP_CODE = #{grpCodeDto}
	</update>

</mapper>
